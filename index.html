<!DOCTYPE html>
<html>
  <head>
    <title>Knockout</title>
    <link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap-1.1.0.min.css" />
    <style>
      .search { float: right; margin-top: -2em }
      .alert-message { margin-top: 1em }
      .search input { width: 25em }
      #content { margin-top: 1em }
      #content :empty:after {
        display: block;
        text-align: center;
        margin-top: 6em;
        content: 'Loading...';
      }
      #content h1 {
        width: 75%;
      }
      .avatar {
        height: 1.25em;
        float: left;
        margin-right: 0.5em;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div>
        <h2 data-bind="click: showIndex">
          <a href="/">Knockout Gist Viewer</a>
        </h2>
        <form class="search">
          <input type="search" placeholder="Lookup Gist..." value="" />
        </form>
        <small>Testing Knockout</small>
      </div>
      <div id="content">
        <ul data-bind="visible: currentPage() == 'index', template: { name: 'gist-summary', foreach: gists }"></ul>
        <div data-bind="visible: currentPage() == 'gist'" style="display: none"><div data-bind="visible: gist.attributes().id, template: { name: 'gist-detail', data: viewModel.gist }"></div></div>
      </div>
    </div>
    <script type="template/mustache" id="gist-summary">
      <li data-bind="click: function() { showGist(this.id) }">
        <a href="/gist/{{id}}">{{description}}</a>
      </li>
    </script>
    <script type="template/mustache" id="gist-detail">
      {{#attrs}}
        <h1>
          <a href="{{user.url}}">
            <img class="avatar" src="{{user.avatar_url}}" />
          </a>
          {{desc}}
        </h1>
        {{#files}}
          <h4>{{filename}}</h4>
          <pre><code>{{content}}</code></pre>
        {{/files}}
      {{/attrs}}
    </script>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script src="https://raw.github.com/pvande/Milk/master/dist/v1.2.0/milk.js"></script>
    <script src="http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-1.2.1.js"></script>
    <script src="knockoutMilkTemplateEngine.js"></script>
    <script src="application.js" type="text/javascript"></script>
  </body>
</html>
